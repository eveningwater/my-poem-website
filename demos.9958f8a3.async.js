"use strict";(self.webpackChunkmy_poem=self.webpackChunkmy_poem||[]).push([[433],{75776:function(V,g,c){c.r(g),c.d(g,{StatisticsComponent:function(){return T},default:function(){return z}});var P=c(90228),v=c.n(P),D=c(87999),C=c.n(D),M=c(48305),p=c.n(M),h=c(75271),t=c(52676),T=function(){var I=(0,h.useState)(!1),k=p()(I,2),N=k[0],j=k[1],$=(0,h.useState)(null),F=p()($,2),x=F[0],b=F[1],H=(0,h.useState)(!0),E=p()(H,2),O=E[0],R=E[1];(0,h.useEffect)(function(){if(typeof window!="undefined"){var s=function(){var m=C()(v()().mark(function e(d){var n,a;return v()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!((n=navigator.clipboard)!==null&&n!==void 0&&n.writeText)){f.next=4;break}return f.next=3,navigator.clipboard.writeText(d);case 3:return f.abrupt("return");case 4:a=document.createElement("textarea"),a.value=d,a.setAttribute("readonly","true"),a.style.position="fixed",a.style.left="-9999px",a.style.top="0",document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a);case 14:case"end":return f.stop()}},e)}));return function(d){return m.apply(this,arguments)}}(),i=function(e){for(var d=(e.dataset.poemTitle||e.innerText||"").replace(/\s*复制\s*$/,"").trim(),n=[],a=e.nextElementSibling;a&&a.tagName.toLowerCase()!=="h2";){var r=(a.innerText||"").trim();r&&n.push(r),a=a.nextElementSibling}return n.length?"".concat(d,`

`).concat(n.join(`

`)):d},l=function(){var e=document.querySelector(".dumi-default-content")||document.querySelector(".markdown")||document.querySelector("article")||document.querySelector("main")||document.body,d=Array.from(e.querySelectorAll("h2"));d.forEach(function(n){if(n.dataset.poemCopyInjected!=="1"&&!n.closest("aside, nav, header, footer")){var a=(n.innerText||"").trim();if(a){n.dataset.poemTitle=a;var r=document.createElement("button");r.type="button",r.className="poem-copy-btn",r.textContent="\u590D\u5236",r.addEventListener("click",function(){var f=C()(v()().mark(function A(L){var S,B;return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return L.preventDefault(),L.stopPropagation(),S=r.textContent,r.disabled=!0,o.prev=4,B=i(n),o.next=8,s(B);case 8:r.textContent="\u5DF2\u590D\u5236",window.setTimeout(function(){r.textContent=S||"\u590D\u5236",r.disabled=!1},1200),o.next=17;break;case 12:o.prev=12,o.t0=o.catch(4),console.error("Failed to copy poem:",o.t0),r.textContent="\u590D\u5236\u5931\u8D25",window.setTimeout(function(){r.textContent=S||"\u590D\u5236",r.disabled=!1},1200);case 17:case"end":return o.stop()}},A,null,[[4,12]])}));return function(A){return f.apply(this,arguments)}}()),n.appendChild(r),n.dataset.poemCopyInjected="1"}}})},u=function(){var m=0;return function(){m&&window.cancelAnimationFrame(m),m=window.requestAnimationFrame(function(){l()})}}();u();var y=document.querySelector(".dumi-default-content")||document.querySelector(".markdown")||document.querySelector("article")||document.querySelector("main")||document.body,w=new MutationObserver(function(){return u()});return w.observe(y,{childList:!0,subtree:!0}),window.addEventListener("hashchange",u),function(){w.disconnect(),window.removeEventListener("hashchange",u)}}},[]),(0,h.useEffect)(function(){typeof window!="undefined"&&G()},[]);var G=function(){var s=C()(v()().mark(function i(){var l,u,y,w;return v()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l=function(){var n=window.location.pathname;return console.log(n),n.includes("my-poem-website")?"/my-poem-website/":"/"},u=l(),e.next=5,fetch("".concat(u,"statistics.json?t=").concat(Date.now()));case 5:if(y=e.sent,!y.ok){e.next=13;break}return e.next=9,y.json();case 9:w=e.sent,b(w),e.next=14;break;case 13:b({total:0,\u65E7\u4F53\u8BD7:0,\u65E7\u4F53\u8BCD:0,\u73B0\u4EE3\u8BD7:0,\u6B4C\u66F2:0,\u5BF9\u8054:0,\u5143\u66F2:0,\u6587\u8A00\u6587:0,\u77ED\u7BC7\u5C0F\u8BF4:0,\u53E5:0});case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Failed to load statistics:",e.t0),b({total:0,\u65E7\u4F53\u8BD7:0,\u65E7\u4F53\u8BCD:0,\u73B0\u4EE3\u8BD7:0,\u6B4C\u66F2:0,\u5BF9\u8054:0,\u5143\u66F2:0,\u6587\u8A00\u6587:0,\u77ED\u7BC7\u5C0F\u8BF4:0,\u53E5:0});case 20:return e.prev=20,R(!1),e.finish(20);case 23:case"end":return e.stop()}},i,null,[[0,16,20,23]])}));return function(){return s.apply(this,arguments)}}();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"statistics-trigger",onClick:function(){return j(!N)},children:(0,t.jsxs)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4865",width:"200",height:"200",children:[(0,t.jsx)("path",{d:"M1024.25175 0l-209.92 23.04L883.45175 92.16 655.61175 370.688 419.06775 152.064c-15.872-14.848-40.96-14.848-57.344-0.512L14.07575 465.408C-3.33225 481.28-4.86825 508.416 11.00375 525.824c8.192 9.216 19.968 13.824 31.744 13.824 10.24 0 20.48-3.584 28.672-10.752l318.464-287.744 241.152 222.72c8.704 8.192 20.48 11.776 31.744 11.264 11.776-1.024 22.528-6.656 30.208-15.36l250.88-306.688 57.344 57.344L1024.25175 0z m0 0M133.37175 1024H30.97175c-16.896 0-30.72-13.824-30.72-30.72v-348.16c0-16.896 13.824-30.72 30.72-30.72h102.4c16.896 0 30.72 13.824 30.72 30.72v348.16c0 16.896-13.824 30.72-30.72 30.72z","p-id":"4866",fill:"#fff"}),(0,t.jsx)("path",{d:"M420.09175 1024H317.69175c-16.896 0-30.72-13.824-30.72-30.72V440.32c0-16.896 13.824-30.72 30.72-30.72h102.4c16.896 0 30.72 13.824 30.72 30.72v552.96c0 16.896-13.824 30.72-30.72 30.72zM706.81175 1024h-102.4c-16.896 0-30.72-13.824-30.72-30.72v-399.36c0-16.896 13.824-30.72 30.72-30.72h102.4c16.896 0 30.72 13.824 30.72 30.72v399.36c0 16.896-13.824 30.72-30.72 30.72zM993.53175 1024h-102.4c-16.896 0-30.72-13.824-30.72-30.72V337.92c0-16.896 13.824-30.72 30.72-30.72h102.4c16.896 0 30.72 13.824 30.72 30.72v655.36c0 16.896-13.824 30.72-30.72 30.72z","p-id":"4867",fill:"#fff"})]})}),N&&(0,t.jsx)("div",{className:"statistics-overlay",onClick:function(){return j(!1)},children:(0,t.jsxs)("div",{className:"statistics-modal",onClick:function(i){return i.stopPropagation()},children:[(0,t.jsxs)("div",{className:"statistics-header",children:[(0,t.jsx)("h2",{children:"\u4F5C\u54C1\u7EDF\u8BA1"}),(0,t.jsx)("button",{className:"statistics-close",onClick:function(){return j(!1)},children:"\xD7"})]}),(0,t.jsx)("div",{className:"statistics-content",children:O?(0,t.jsx)("div",{className:"statistics-loading",children:"\u52A0\u8F7D\u4E2D..."}):x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"statistics-total",children:[(0,t.jsx)("span",{className:"statistics-label",children:"\u603B\u8BA1\uFF1A"}),(0,t.jsx)("span",{className:"statistics-value",children:x.total})]}),(0,t.jsx)("div",{className:"statistics-list",children:Object.entries(x).filter(function(s){var i=p()(s,1),l=i[0];return l!=="total"}).map(function(s){var i=p()(s,2),l=i[0],u=i[1];return(0,t.jsxs)("div",{className:"statistics-item",children:[(0,t.jsxs)("span",{className:"statistics-type",children:[l,"\uFF1A"]}),(0,t.jsx)("span",{className:"statistics-count",children:u})]},l)})})]}):(0,t.jsx)("div",{className:"statistics-error",children:"\u6682\u65E0\u6570\u636E"})})]})})]})},z=T}}]);
