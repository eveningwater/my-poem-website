"use strict";(self.webpackChunkmy_poem=self.webpackChunkmy_poem||[]).push([[433],{75776:function(Q,A,d){d.r(A),d.d(A,{StatisticsComponent:function(){return I},default:function(){return $}});var z=d(90228),h=d.n(z),M=d(87999),S=d.n(M),R=d(48305),b=d.n(R),g=d(75271),r=d(52676),I=function(){var H=(0,g.useState)(!1),F=b()(H,2),P=F[0],E=F[1],O=(0,g.useState)(null),B=b()(O,2),T=B[0],N=B[1],G=(0,g.useState)(!0),D=b()(G,2),K=D[0],V=D[1];(0,g.useEffect)(function(){if(typeof window!="undefined"){var l=function(){var c=S()(h()().mark(function o(a){var e,t;return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!((e=navigator.clipboard)!==null&&e!==void 0&&e.writeText)){i.next=4;break}return i.next=3,navigator.clipboard.writeText(a);case 3:return i.abrupt("return");case 4:t=document.createElement("textarea"),t.value=a,t.setAttribute("readonly","true"),t.style.position="fixed",t.style.left="-9999px",t.style.top="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t);case 14:case"end":return i.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),u=function(o){for(var a=(o.dataset.poemTitle||o.innerText||"").replace(/\s*复制\s*$/,"").trim(),e=[],t=o.nextElementSibling;t&&t.tagName.toLowerCase()!=="h2";){var n=(t.innerText||"").trim();n&&e.push(n),t=t.nextElementSibling}return e.length?"".concat(a,`

`).concat(e.join(`

`)):a},v=function(){var o=document.querySelector(".poem-img-preview-overlay");if(o)return o;var a=document.createElement("div");a.className="poem-img-preview-overlay",a.setAttribute("aria-hidden","true");var e=document.createElement("div");e.className="poem-img-preview-modal",e.addEventListener("click",function(w){return w.stopPropagation()});var t=document.createElement("button");t.type="button",t.className="poem-img-preview-close",t.textContent="\xD7";var n=document.createElement("a");n.className="poem-img-preview-open",n.target="_blank",n.rel="noopener noreferrer",n.textContent="\u67E5\u770B\u539F\u56FE";var i=document.createElement("img");i.className="poem-img-preview-img",i.alt="";var p=document.createElement("div");p.className="poem-img-preview-header",p.appendChild(n),p.appendChild(t),e.appendChild(p),e.appendChild(i),a.appendChild(e);var f=function(){a.classList.remove("is-open"),a.setAttribute("aria-hidden","true"),document.documentElement.classList.remove("poem-img-preview-lock")};a.addEventListener("click",f),t.addEventListener("click",f);var k=function(q){q.key==="Escape"&&f()};return window.addEventListener("keydown",k),document.body.appendChild(a),a.__poemClose=f,a.__poemImg=i,a.__poemLink=n,a},y=function(o,a){var e=v(),t=e.__poemImg,n=e.__poemLink;t.src=o,t.alt=a||"",n.href=o,e.classList.add("is-open"),e.setAttribute("aria-hidden","false"),document.documentElement.classList.add("poem-img-preview-lock")},C=function(){var o=document.querySelector(".dumi-default-content")||document.querySelector(".markdown")||document.querySelector("article")||document.querySelector("main")||document.body,a=Array.from(o.querySelectorAll("h2"));a.forEach(function(e){if(e.dataset.poemCopyInjected!=="1"&&!e.closest("aside, nav, header, footer")){var t=(e.innerText||"").trim();if(t){e.dataset.poemTitle=t;var n=document.createElement("button");n.type="button",n.className="poem-copy-btn",n.textContent="\u590D\u5236",n.addEventListener("click",function(){var i=S()(h()().mark(function p(f){var k,w;return h()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return f.preventDefault(),f.stopPropagation(),k=n.textContent,n.disabled=!0,m.prev=4,w=u(e),m.next=8,l(w);case 8:n.textContent="\u5DF2\u590D\u5236",window.setTimeout(function(){n.textContent=k||"\u590D\u5236",n.disabled=!1},1200),m.next=17;break;case 12:m.prev=12,m.t0=m.catch(4),console.error("Failed to copy poem:",m.t0),n.textContent="\u590D\u5236\u5931\u8D25",window.setTimeout(function(){n.textContent=k||"\u590D\u5236",n.disabled=!1},1200);case 17:case"end":return m.stop()}},p,null,[[4,12]])}));return function(p){return i.apply(this,arguments)}}()),e.appendChild(n),e.dataset.poemCopyInjected="1"}}})},j=function(){var o=document.querySelector(".dumi-default-content")||document.querySelector(".markdown")||document.querySelector("article")||document.querySelector("main")||document.body,a=Array.from(o.querySelectorAll("img"));a.forEach(function(e){if(e.dataset.poemThumbInjected!=="1"&&!e.closest("aside, nav, header, footer")&&e.getAttribute("src")){e.classList.add("poem-img-thumb"),e.decoding="async",e.loading||(e.loading="lazy"),e.tabIndex=e.tabIndex>=0?e.tabIndex:0;var t=function(i){i.preventDefault(),i.stopPropagation();var p=e.currentSrc||e.src;y(p,e.alt||"")};e.addEventListener("click",t),e.addEventListener("keydown",function(n){var i=n.key;(i==="Enter"||i===" ")&&t(n)}),e.dataset.poemThumbInjected="1"}})},x=function(){var c=0;return function(){c&&window.cancelAnimationFrame(c),c=window.requestAnimationFrame(function(){C(),j()})}}();x();var s=document.querySelector(".dumi-default-content")||document.querySelector(".markdown")||document.querySelector("article")||document.querySelector("main")||document.body,L=new MutationObserver(function(){return x()});return L.observe(s,{childList:!0,subtree:!0}),window.addEventListener("hashchange",x),function(){L.disconnect(),window.removeEventListener("hashchange",x)}}},[]),(0,g.useEffect)(function(){typeof window!="undefined"&&J()},[]);var J=function(){var l=S()(h()().mark(function u(){var v,y,C,j;return h()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,v=function(){var c=window.location.pathname;return console.log(c),c.includes("my-poem-website")?"/my-poem-website/":"/"},y=v(),s.next=5,fetch("".concat(y,"statistics.json?t=").concat(Date.now()));case 5:if(C=s.sent,!C.ok){s.next=13;break}return s.next=9,C.json();case 9:j=s.sent,N(j),s.next=14;break;case 13:N({total:0,\u65E7\u4F53\u8BD7:0,\u65E7\u4F53\u8BCD:0,\u73B0\u4EE3\u8BD7:0,\u6B4C\u66F2:0,\u5BF9\u8054:0,\u5143\u66F2:0,\u6563\u6587:0,\u6587\u8A00\u6587:0,\u77ED\u7BC7\u5C0F\u8BF4:0,\u53E5:0});case 14:s.next=20;break;case 16:s.prev=16,s.t0=s.catch(0),console.error("Failed to load statistics:",s.t0),N({total:0,\u65E7\u4F53\u8BD7:0,\u65E7\u4F53\u8BCD:0,\u73B0\u4EE3\u8BD7:0,\u6B4C\u66F2:0,\u5BF9\u8054:0,\u5143\u66F2:0,\u6563\u6587:0,\u6587\u8A00\u6587:0,\u77ED\u7BC7\u5C0F\u8BF4:0,\u53E5:0});case 20:return s.prev=20,V(!1),s.finish(20);case 23:case"end":return s.stop()}},u,null,[[0,16,20,23]])}));return function(){return l.apply(this,arguments)}}();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"statistics-trigger",onClick:function(){return E(!P)},children:(0,r.jsxs)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4865",width:"200",height:"200",children:[(0,r.jsx)("path",{d:"M1024.25175 0l-209.92 23.04L883.45175 92.16 655.61175 370.688 419.06775 152.064c-15.872-14.848-40.96-14.848-57.344-0.512L14.07575 465.408C-3.33225 481.28-4.86825 508.416 11.00375 525.824c8.192 9.216 19.968 13.824 31.744 13.824 10.24 0 20.48-3.584 28.672-10.752l318.464-287.744 241.152 222.72c8.704 8.192 20.48 11.776 31.744 11.264 11.776-1.024 22.528-6.656 30.208-15.36l250.88-306.688 57.344 57.344L1024.25175 0z m0 0M133.37175 1024H30.97175c-16.896 0-30.72-13.824-30.72-30.72v-348.16c0-16.896 13.824-30.72 30.72-30.72h102.4c16.896 0 30.72 13.824 30.72 30.72v348.16c0 16.896-13.824 30.72-30.72 30.72z","p-id":"4866",fill:"#fff"}),(0,r.jsx)("path",{d:"M420.09175 1024H317.69175c-16.896 0-30.72-13.824-30.72-30.72V440.32c0-16.896 13.824-30.72 30.72-30.72h102.4c16.896 0 30.72 13.824 30.72 30.72v552.96c0 16.896-13.824 30.72-30.72 30.72zM706.81175 1024h-102.4c-16.896 0-30.72-13.824-30.72-30.72v-399.36c0-16.896 13.824-30.72 30.72-30.72h102.4c16.896 0 30.72 13.824 30.72 30.72v399.36c0 16.896-13.824 30.72-30.72 30.72zM993.53175 1024h-102.4c-16.896 0-30.72-13.824-30.72-30.72V337.92c0-16.896 13.824-30.72 30.72-30.72h102.4c16.896 0 30.72 13.824 30.72 30.72v655.36c0 16.896-13.824 30.72-30.72 30.72z","p-id":"4867",fill:"#fff"})]})}),P&&(0,r.jsx)("div",{className:"statistics-overlay",onClick:function(){return E(!1)},children:(0,r.jsxs)("div",{className:"statistics-modal",onClick:function(u){return u.stopPropagation()},children:[(0,r.jsxs)("div",{className:"statistics-header",children:[(0,r.jsx)("h2",{children:"\u4F5C\u54C1\u7EDF\u8BA1"}),(0,r.jsx)("button",{className:"statistics-close",onClick:function(){return E(!1)},children:"\xD7"})]}),(0,r.jsx)("div",{className:"statistics-content",children:K?(0,r.jsx)("div",{className:"statistics-loading",children:"\u52A0\u8F7D\u4E2D..."}):T?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"statistics-total",children:[(0,r.jsx)("span",{className:"statistics-label",children:"\u603B\u8BA1\uFF1A"}),(0,r.jsx)("span",{className:"statistics-value",children:T.total})]}),(0,r.jsx)("div",{className:"statistics-list",children:Object.entries(T).filter(function(l){var u=b()(l,1),v=u[0];return v!=="total"}).map(function(l){var u=b()(l,2),v=u[0],y=u[1];return(0,r.jsxs)("div",{className:"statistics-item",children:[(0,r.jsxs)("span",{className:"statistics-type",children:[v,"\uFF1A"]}),(0,r.jsx)("span",{className:"statistics-count",children:y})]},v)})})]}):(0,r.jsx)("div",{className:"statistics-error",children:"\u6682\u65E0\u6570\u636E"})})]})})]})},$=I}}]);
